{% extends "stu_base.html" %}
{% block title %}å­¦ç”Ÿãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸{% endblock %}

{% block content %}
<section class="content">
    <h1 class="title">å­¦ç”Ÿãƒ¡ãƒ‹ãƒ¥ãƒ¼</h1>
    <p id="datetime" class="datetime"></p>

    <div class="menu-container">

        <!-- ãƒœã‚¿ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
        <div class="menu-box">
            <div class="buttons-vertical">
                <a href="{% url 'telles:stu_calendar' %}" class="action-card">
                    <div class="action-icon">ğŸ“…</div>
                    <div class="action-text">ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</div>
                </a>
                <a href="{% url 'telles:student_account' %}" class="action-card">
                    <div class="action-icon">ğŸ‘¤</div>
                    <div class="action-text">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ</div>
                </a>
            </div>
        </div>

        <!-- æœ¬æ—¥ã®æƒ…å ± -->
        <div class="class-box">
            <h3>æœ¬æ—¥ã®å‡ºå¸­çŠ¶æ³</h3>
            <div style="padding: 20px; text-align: center;">
                <p style="font-size: 1.2rem; font-weight: bold; margin-bottom: 10px;">{{ date }}</p>
                {% if attendance %}
                <div style="font-size: 1.5rem; color: #4d6812; font-weight: bold;">
                    {{ attendance.get_status_display }}
                </div>
                {% if attendance.reason %}
                <p style="margin-top: 10px; color: #666;">ç†ç”±: {{ attendance.reason }}</p>
                {% endif %}
                {% else %}
                <div style="font-size: 1.2rem; color: #999;">
                    æœ¬æ—¥ã®ç”³è«‹ã¯ã¾ã ã‚ã‚Šã¾ã›ã‚“
                </div>
                <a href="{% url 'telles:stu_calendar' %}" class="signup-btn"
                    style="display: inline-block; text-decoration: none; margin-top: 15px;">
                    ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‹ã‚‰ç”³è«‹ã™ã‚‹
                </a>
                {% endif %}
            </div>
        </div>

    </div>
</section>

<script>
    function updateDateTime() {
        const today = new Date();
        const year = today.getFullYear();
        const month = today.getMonth() + 1;
        const day = today.getDate();
        const hours = String(today.getHours()).padStart(2, '0');
        const minutes = String(today.getMinutes()).padStart(2, '0');

        document.getElementById("datetime").textContent =
            `${year}å¹´${month}æœˆ${day}æ—¥ ${hours}:${minutes}`;
    }

    updateDateTime();
    setInterval(updateDateTime, 60000);
</script>
{% endblock %}