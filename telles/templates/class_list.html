{% extends "base.html" %}

{% block title %}ã‚¯ãƒ©ã‚¹ä¸€è¦§{% endblock %}

{% block content %}
<div class="page-container">

  <h2 class="title">ã‚¯ãƒ©ã‚¹ä¸€è¦§</h2>

  <span id="today"></span>

  <table class="class-table-detail">
    <thead>
      <tr>
        <th>ç•ªå·</th>
        <th>åå‰</th>
        <th>è©³ç´°</th>
        <th>é€šçŸ¥</th>
      </tr>
    </thead>

    <tbody>
      {% for student in students %}
      <tr>
        <!-- class_name ã¯ StudentProfile ã«å­˜åœ¨ã—ãªã„ã®ã§å‰Šé™¤ -->
        <td>{{ student.student_number }}</td>
        <td>{{ student.student_name }}</td>

        <!-- detail ã« student.id ã‚’æ¸¡ã™ -->
        <td>
          <a href="{% url 'telles:detail' student.id date %}">â–¶</a>
        </td>
        <td>
              {% if student.id in notify_map %}
            <span style="color: red; font-weight: bold; margin-left: 10px;">
              â–¶ğŸ””
            </span>
          {% endif %}
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="4" class="empty">ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</td></tr>
      {% endfor %}
    </tbody>
  </table>

</div>

<script>
  const today = new Date();
  const year = today.getFullYear();
  const month = today.getMonth() + 1;
  const day = today.getDate();

  document.getElementById("today").textContent = `${year}å¹´${month}æœˆ${day}æ—¥`;
</script>
{% endblock %}
