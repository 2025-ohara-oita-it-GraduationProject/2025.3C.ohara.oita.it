{% extends "base.html" %}

{% block title %}ã‚¯ãƒ©ã‚¹ä¸€è¦§{% endblock %}

{% block content %}
<div class="page-container">

  <h2 class="title">ã‚¯ãƒ©ã‚¹ä¸€è¦§</h2>

  <span id="today"></span>

  {% if students %}
  <table class="class-table-detail">
    <thead>
      <tr>
        <th>ç•ªå·</th>
        <th>åå‰</th>
        <th>å‡ºå¸­çŠ¶æ³</th>
        <th>é€šçŸ¥</th>
      </tr>
    </thead>
    <tbody>
      {% for student in students %}
      <tr {% if student.id in notify_map %} style="background-color: #fff0f0;" {% endif %}>
        <td>{{ student.student_number }}</td>
        <td>{{ student.student_name }}</td>
        <td>
          {% if student.attendance %}
            <a href="{% url 'telles:detail' student.id date %}">
              {{ student.attendance.get_status_display }}
            </a>
          {% else %}
            -
          {% endif %}
        </td>
        <td>
          {% if student.id in notify_map %}
            <span style="color: red; font-weight: bold; margin-left: 10px;">ğŸ””</span>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
    <p class="empty">ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</p>
  {% endif %}

</div>

<script>
  const today = new Date();
  const year = today.getFullYear();
  const month = today.getMonth() + 1;
  const day = today.getDate();
  document.getElementById("today").textContent = `${year}å¹´${month}æœˆ${day}æ—¥`;
</script>
{% endblock %}
